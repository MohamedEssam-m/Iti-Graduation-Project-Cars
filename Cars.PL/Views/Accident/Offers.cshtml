@using Cars.DAL.Entities.Offers
@model List<Offer>

@{
    ViewData["Title"] = "Offers";
    Layout = "_Layout";
}

<link rel="stylesheet" href="~/css/GetAllCars.css" />

<section class="hero-wrap hero-wrap-2 js-fullheight" style="background-image: url('/images/bg_3.jpg');" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
        <div class="row no-gutters slider-text js-fullheight align-items-end justify-content-start">
            <div class="col-md-9 ftco-animate pb-5">
                <p class="breadcrumbs">
                    <span class="mr-2">
                        <a href="/">Home <i class="ion-ios-arrow-forward"></i></a>
                    </span> 
                    <span>Offers <i class="ion-ios-arrow-forward"></i></span>
                </p>
                <h1 class="mb-3 bread">Offers</h1>
            </div>
        </div>
    </div>
</section>

@if (Model == null || Model.Count == 0)
{
    <h2 class="alert alert-info text-center mt-5">
        No Offers available for this Accident
    </h2>
}
else
{
    <div class="offers-container" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; padding: 20px;">
        @foreach (var offer in Model)
        {
            <div class="car-card" style="box-shadow: 0 4px 8px rgba(0,0,0,0.2); border-radius: 10px; overflow: hidden;">
                <!-- Offer Content -->
                <div class="car-content" style="padding: 20px;">
                    <h2 class="car-brand">Offer Price: @offer.Price.ToString("C")</h2>
                    
                    <div class="car-info" style="margin-top: 10px;">
                        <p><strong>Description:</strong> @offer.Details</p>
                        <p><strong>Car:</strong> @offer.CarName</p>
                        <p><strong>Mechanic:</strong> @offer.Mechanic?.UserName</p>
                        <p><strong>Date:</strong> @offer.OfferDate.ToString("yyyy/MM/dd")</p>
                        
                    </div>

                    <div class="car-buttons" style="margin-top: 15px; display:flex; gap:10px;">
                        <!-- Accept Offer -->
                        <form asp-controller="Offer" asp-action="Accept" method="post">
                            <button type="submit" name="id" value="@offer.OfferId" class="book-button" 
                                    style="background-color: green; color: white; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer;">
                                Accept
                            </button>
                        </form>

                        <!-- Decline Offer -->
                        <form asp-controller="Offer" asp-action="Decline" method="post">
                            <button type="submit" name="id" value="@offer.OfferId" class="book-button" 
                                    style="background-color: red; color: white; padding: 10px 15px; border: none; border-radius: 8px; cursor: pointer;">
                                Decline
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        }
    </div>
}
