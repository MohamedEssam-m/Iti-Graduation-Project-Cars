@using Cars.BLL.ModelVM.Accident
@model UpdateAccidentVM


<link rel="stylesheet" href="~/css/SignUp.css" />
<link rel="stylesheet" href="~/css/ViewBag.css" />
<script src="~/js/ViewBag.js"></script>

@if (ViewBag.Success != null)
{
    <div class="toast-alert success-toast">
        <span>@ViewBag.Success</span>
        <button class="close-btn">&times;</button>
    </div>
}

@if (ViewBag.Error != null)
{
    <div class="toast-alert error-toast">
        <span>@ViewBag.Error</span>
        <button class="close-btn">&times;</button>
    </div>
}


<div class="registration-container">
    <div class="registration-card">
        <div class="registration-header">
            <h2>Edit Your Accident</h2>
        </div>

        <form asp-action="Edit" asp-controller="Accident" method="post" enctype="multipart/form-data" class="registration-form">
            <input type="hidden" asp-for="ImagePath" />
            <input type="hidden" asp-for="AccidentId"></input>
            <!-- Description -->
            <div class="form-group">
                <label asp-for="Description" class="form-label">Description</label>
                <input asp-for="Description" class="form-input" placeholder="Enter The Description of The Accident" />
                <span asp-validation-for="Description" class="text-danger"></span>
            </div>


            <!-- Location -->
            <div class="form-group">
                <label asp-for="Location" class="form-label">Location</label>
                <input asp-for="Location" class="form-input" placeholder="Enter The Location of The Accident" />
                <span asp-validation-for="Location" class="text-danger"></span>
            </div>


            <!-- AccidentDate -->
            <div class="form-group">
                <label asp-for="AccidentDate" class="form-label">Accident Date</label>
                <input asp-for="AccidentDate" class="form-input" placeholder="Enter The Date of The Accident" />
                <span asp-validation-for="AccidentDate" class="text-danger"></span>
            </div>
            <!-- Accident Image -->
            <div class="form-group">
                <label asp-for="Accident_Image" class="form-label">Upload Accident Image</label>
                <input asp-for="Accident_Image" type="file" class="form-input" />
                <span asp-validation-for="Accident_Image" class="text-danger"></span>
            </div>

            <!-- Car Id Dropdown -->
            <div class="form-group">
                <label asp-for="carId" class="form-label">Select Car</label>
                <select asp-for="carId" class="form-input">
                    <option value=""> Select Your Car </option>
                    @{bool isTrue = false;}
                    @if(ViewBag.RENTS != null && ViewBag.RENTS.Count > 0)
                    {
                        @foreach (var rent in ViewBag.RENTS)
                        {
                            @if(rent.Status == "Paid")
                            {
                                isTrue = true;
                                <option value="@rent.CarId">@rent.Car?.Brand</option>
                            }
                        }
                        @if(!isTrue)
                        {
                            <div style="text-align: center; padding: 40px; color: #6b7280;">
                                <i class="fas fa-car" style="font-size: 48px; color: #d1d5db; margin-bottom: 15px;"></i>
                                <p style="font-size: 18px; margin: 0;">@(User.IsInRole("User") ? "No rented cars found" : "No cars assigned for maintenance")</p>
                            </div>
                        }
                    }
                </select>
                <span asp-validation-for="carId" class="text-danger"></span>
            </div>

            <!-- Submit Button -->
            <div class="form-group">
                <button type="submit" class="btn-register">@SharedLocalizer["Confirm"]</button>
            </div>
            
        </form>
    </div>
</div>
<style>
.signup-choice-container {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 80vh;
    background: linear-gradient(135deg, #000000, #1a1a1a);
    padding: 20px;
}

.signup-choice-card {
    background: #fff;
    border-radius: 12px;
    padding: 40px 30px;
    text-align: center;
    box-shadow: 0 15px 35px rgba(0,0,0,0.2);
    max-width: 400px;
    width: 100%;
}

.signup-choice-card h2 {
    font-size: 28px;
    font-weight: 700;
    color: #000;
    margin-bottom: 15px;
}

.signup-choice-card p {
    font-size: 16px;
    color: #333;
    margin-bottom: 30px;
}

.signup-buttons {
    display: flex;
    justify-content: space-between;
    gap: 20px;
}

.signup-buttons .btn {
    flex: 1;
    padding: 12px 0;
    font-size: 16px;
    font-weight: bold;
    border-radius: 8px;
    text-decoration: none;
    color: #fff;
    transition: all 0.3s ease;
    display: inline-block;
}

.btn-user {
    background: #00bcd4;
}

.btn-user:hover {
    background: #000;
    box-shadow: 0 0 10px #00bcd4;
}

.btn-mechanic {
    background: #000;
    border: 2px solid #00bcd4;
}

.btn-mechanic:hover {
    background: #00bcd4;
    box-shadow: 0 0 10px #00bcd4;
}
</style>





